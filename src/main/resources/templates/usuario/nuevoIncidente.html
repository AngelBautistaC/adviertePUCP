<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head >
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <div  th:replace="fragmentos/newnavbar.html :: cabecera(title='Nuevo Incidente')">

    </div>
    <title th:text="AdviertePUCP"></title>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/b101dc44ce.js" crossorigin="anonymous"></script>
    <!--JQUery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Google Fonts -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- MDB -->

    <link rel="stylesheet" th:href="@{/css/mdb.min.css}" />
    <link rel="stylesheet" href="/css/suspendido.css">
    <style>
        p{
            color:black;

        }
        #galeria{
            display: flex;
        }
        #galeria img{
            width: 85px;
            height: 85px;
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(0,0,0,0.2);
            opacity: 85%;
        }
    </style>
</head>
<body style="background-color: #eee;">
<header th:replace="fragmentos/newnavbar.html :: navbar (user=null)">

</header>
<section style="background-color: #eee; margin-top: 0;">

    <div class="container py-5">
        <div class="row">
            <div class="col">
                <nav aria-label="breadcrumb" class="bg-light rounded-3 p-3 mb-4">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item" style="font-size: large"><a href="#">Inicio</a></li>
                        <li class="breadcrumb-item active" style="font-size: large" aria-current="page">Crear incidencia</li>
                    </ol>
                </nav>
            </div>
        </div>
        <form method="post" th:action="@{'/usuario/guardarincidente'}" enctype="multipart/form-data">

        <div class="row">
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-body text-center">
                        <img id="preview2" src="https://img.freepik.com/premium-vector/camera-icon-cartoon-flat-design_387795-125.jpg?w=2000" alt="avatar"
                             class=" img-fluid" style="width: 255px;">
                        <h5 class="my-3" style="color: black">Fotos de lo sucedido</h5>
                        <div id="galeria"></div>
                        <div class="d-flex justify-content-center mb-1">
                            <label for="subirfotos" class="btn btn-lg-primary">Agregar Imágenes</label>
                            <input onchange="document.getElementById('preview2').src = window.URL.createObjectURL(this.files[0]);previewMultiple(event)" name="archivos" id="subirfotos" multiple hidden type="file">
                            
                        </div>
                    </div>
                    
                </div>
             

            </div>
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">¿Qué sucedio?</p>

                            </div>
                            <div class="col-sm-9">
                                <input name="titulo" type="text" id="form12" class="form-control" />
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Describe lo sucedido a detalle</p>
                            </div>
                            <div class="col-sm-9">
                                <textarea name="descripcion" class="form-control" id="textAreaExample" rows="4"></textarea>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">¿Dónde sucedió?</p>

                            </div>
                            <div class="col-sm-9">
                                <input list="zonapucp" name="zonapucp" type="text" id="zonapucpinput" class="form-control"/>
                                <datalist id="zonapucp">
                                    <option th:each="zona:${listaZonas}" th:value="${zona.getId()}" th:text="${zona.getNombre()}">
                                </datalist>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Tipo de incidencia</p>
                            </div>
                            <div class="col-sm-9">
                                <select name="tipoincidencia" class="form-select" style="font-size: small">
                                    <option th:each="tipo:${listaTiposIncidencia}" th:value="${tipo.getId()}" th:text="${tipo.getNombre()}"></option>
                                </select>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Nivel de urgencia</p>
                            </div>
                            <div class="col-sm-9">
                                <select name="urgencia" class="form-select" style="font-size: small">
                                    <option hidden>Seleccionar</option>
                                    <option value="leve">Leve</option>
                                    <option value="moderado">Moderado</option>
                                    <option value="critico">Crítico</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-md-12">
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">PUBLICAR</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </form>

    </div>
</section>
</body>
    
    <script>
    
        function previewMultiple(event){
            var saida = document.getElementById("subirfotos");
            var quantos = saida.files.length;
            for(i = 0; i < quantos; i++){
                var urls = URL.createObjectURL(event.target.files[i]);
                document.getElementById("galeria").innerHTML += '<img src="'+urls+'">';
            }
        }
        
    </script>
    
</html>